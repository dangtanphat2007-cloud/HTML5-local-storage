<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>üìù Ghi nh·ªõ vƒÉn b·∫£n t·∫°m (Local Storage)</title>
  
</head>
<body>
  <h2>üìù Ghi nh·ªõ vƒÉn b·∫£n t·∫°m b·∫±ng Local Storage</h2>
  <p>Nh·∫≠p ghi ch√∫ c·ªßa b·∫°n b√™n d∆∞·ªõi ‚Äî trang n√†y s·∫Ω t·ª± l∆∞u l·∫°i vƒÉn b·∫£n!</p>

  <textarea id="note" placeholder="Nh·∫≠p ghi ch√∫..."></textarea>
  <br>
  <button onclick="clearNote()">üóë X√≥a ghi ch√∫</button>

  <script>
    const noteBox = document.getElementById("note");

    // Khi trang t·∫£i l·∫°i, ƒë·ªçc d·ªØ li·ªáu c≈©
    noteBox.value = localStorage.getItem("note") || "";

    // T·ª± ƒë·ªông l∆∞u m·ªói khi ng∆∞·ªùi d√πng g√µ
    noteBox.addEventListener("input", () => {
      localStorage.setItem("note", noteBox.value);
    });

    // N√∫t x√≥a ghi ch√∫
    function clearNote() {
      localStorage.removeItem("note");
      noteBox.value = "";
      alert("ƒê√£ x√≥a ghi ch√∫!");
    }
  </script>
  <h2> T√≠nh tra dung l∆∞·ª£ng c·ªßa webstorage</h2>
  <p id="storageSize"></p>

<script>
function getLocalStorageSize() {
  let total = 0;

  for (let key in localStorage) {
    if (localStorage.hasOwnProperty(key)) {
      // C·ªông ƒë·ªô d√†i c·ªßa key v√† value (m·ªói k√Ω t·ª± ~ 2 byte)
      total += ((key.length + localStorage[key].length) * 2);
    }
  }

  // ƒê·ªïi sang KB ho·∫∑c MB
  let kb = (total / 1024).toFixed(2);
  let mb = (total / 1024 / 1024).toFixed(4);

  return `Dung l∆∞·ª£ng localStorage ƒëang d√πng: ${kb} KB (${mb} MB)`;
}

// Hi·ªÉn th·ªã k·∫øt qu·∫£
document.getElementById("storageSize").innerHTML = getLocalStorageSize();
</script>

</body>
</html>
